
# Table of Contents

=================
* [Εγκατάσταση](#εγκατάσταση)
    * [Απαιτήσεις](#απαιτήσεις)
    * [Οδηγίες Εγκατάστασης](#οδηγίες-εγκατάστασης)
* [Περιγραφή API](#περιγραφή-api)
    * [Methods](#methods)
        * [Board](#board)
            * [Ανάγνωση Board](#ανάγνωση-board)
            * [Αρχικοποίηση Board](#αρχικοποίηση-board)
        * [Play](#play)
            * [Παίξιμο Φύλλου](#παίξιμο-φύλλου)
        * [Player](#player)
            * [Ανάγνωση στοιχείων παίκτη](#ανάγνωση-στοιχείων-παίκτη)
            * [Καθορισμός στοιχείων παίκτη](#καθορισμός-στοιχείων-παίκτη)
        * [Status](#status)
            * [Ανάγνωση κατάστασης παιχνιδιού](#ανάγνωση-κατάστασης-παιχνιδιού)
    * [Entities](#entities)
        * [Board](#board-1)
        * [Players](#players)
        * [Game_status](#game_status)


# Demo Page

Μπορείτε να κατεβάσετε τοπικά ή να επισκευτείτε την σελίδα:
[ΒΑΛΕ_ΕΔΩ_ΤΟ_LINK_ΣΟΥ]

# Εγκατάσταση

## Απαιτήσεις

* Apache2
* Mysql Server / MariaDB
* php

## Οδηγίες Εγκατάστασης

* Κάντε clone το project σε κάποιον φάκελο 




`$ git clone https://github.com/TO_REPO_SOU/xeri.git`
* Βεβαιωθείτε ότι ο φάκελος είναι προσβάσιμος από τον Apache Server. πιθανόν να χρειαστεί να καθορίσετε τις παρακάτω ρυθμίσεις.
* Θα πρέπει να δημιουργήσετε στην Mysql την βάση με όνομα 'xeri' (ή το όνομα της βάσης σου) και να φορτώσετε σε αυτήν την βάση τα δεδομένα από το αρχείο `schema.sql` (ή `setup_db.php`).
* Θα πρέπει να φτιάξετε το αρχείο `db_upass.php` το οποίο να περιέχει:

```php
    <?php
	$DB_PASS = 'κωδικός';
	$DB_USER = 'όνομα χρήστη';
    ?>

```

# Περιγραφή Παιχνιδιού

Η Ξερή παίζεται ως εξής: Η τράπουλα μοιράζεται στους δύο παίκτες. Σκοπός είναι να μαζέψουν τα φύλλα από κάτω ρίχνοντας ίδιο φύλλο με το τελευταίο ή Ρίχνοντας Βαλέ.

Οι κανόνες είναι οι εξής:

* Κάθε παίκτης παίρνει 6 φύλλα σε κάθε γύρο.
* Αν ρίξει ίδιο φύλλο με το κάτω, τα παίρνει όλα.
* Αν κάτω υπάρχει μόνο ένα φύλλο και το πάρει, κάνει "Ξερή" (επιπλέον πόντοι).
* Ο Βαλές μαζεύει όλα τα φύλλα κάτω (εκτός αν είναι για Ξερή).

Η βάση μας κρατάει τους εξής πίνακες και στοιχεία: `players`, `game_status`.

Η εφαρμογή αναπτύχθηκε πλήρως (2-3 άτομα) περιλαμβάνοντας Web GUI, PHP API και βάση δεδομένων MySQL.

## Συντελεστές

Προγραμματιστής 1: Backend PHP & MySQL Design
Προγραμματιστής 2: Frontend HTML/JS & AJAX

# Περιγραφή API

## Methods

### Board

#### Ανάγνωση Board

```
GET /xeri.php/board

```

Επιστρέφει την κατάσταση του Board (τα φύλλα που είναι κάτω στο τραπέζι).

#### Αρχικοποίηση Board

```
POST /xeri.php/board

```

Αρχικοποιεί το Board, δηλαδή το παιχνίδι. Γίνονται reset τα πάντα σε σχέση με το παιχνίδι (παίκτες, τράπουλα, σκορ).
Επιστρέφει Json με status: 'ok'.

### Play

#### Παίξιμο Φύλλου

```
POST /xeri.php/play

```

Json Data στο body:

| Field | Description | Required |
| --- | --- | --- |
| `cardIndex` | Η θέση του φύλλου στο χέρι (0-5) | yes |
| `token` | Το token του παίκτη (Header) | yes |

Κάνει την κίνηση του παίκτη ρίχνοντας το φύλλο στο τραπέζι. Ελέγχεται αν είναι η σειρά του, αν το φύλλο υπάρχει και αν μάζεψε πόντους ή έκανε Ξερή.
Επιστρέφει Json με το αποτέλεσμα της κίνησης.

### Player

#### Ανάγνωση στοιχείων παίκτη

```
GET /xeri.php/players

```

Επιστρέφει τα φύλλα (Hand) του παίκτη βάσει του token που στέλνεται στο Header.

#### Καθορισμός στοιχείων παίκτη

```
POST /xeri.php/players

```

Json Data στο body:

| Field | Description | Required |
| --- | --- | --- |
| `username` | Το username για τον παίκτη. | no |

Επιστρέφει τα στοιχεία του παίκτη και ένα token. Το token πρέπει να το χρησιμοποιεί ο παίκτης καθόλη τη διάρκεια του παιχνιδιού. Επίσης επιστρέφει αν είναι ο 'P1' ή 'P2'.

### Status

#### Ανάγνωση κατάστασης παιχνιδιού

```
GET /xeri.php/status

```

Επιστρέφει το στοιχείο [Game_status](https://www.google.com/search?q=%23Game_status).

## Entities

### Board

---

Το board (τραπέζι) είναι ένας πίνακας JSON, ο οποίος περιέχει τα φύλλα που είναι ριγμένα κάτω:

| Attribute | Description | Values |
| --- | --- | --- |
| `card` | Το σύμβολο και η αξία του φύλλου | π.χ. "H-10", "D-5" |

### Players

---

O κάθε παίκτης έχει τα παρακάτω στοιχεία:

| Attribute | Description | Values |
| --- | --- | --- |
| `username` | Όνομα παίκτη (προαιρετικό) | String |
| `p_turn` | H σειρά του παίκτη | 'P1','P2' |
| `token` | To κρυφό token του παίκτη. | HEX String |
| `hand` | Τα φύλλα που κρατάει ο παίκτης | JSON Array |
| `score` | Το σκορ του παίκτη | Integer |

### Game_status

---

H κατάσταση παιχνιδιού έχει τα παρακάτω στοιχεία:

| Attribute | Description | Values |
| --- | --- | --- |
| `status` | Κατάσταση παιχνιδιού | 'waiting', 'started', 'ended', 'aborted' |
| `p_turn` | Ποιανού παίκτη είναι η σειρά | 'P1','P2',null |
| `board` | Τα φύλλα που βρίσκονται στο τραπέζι | JSON Array |
| `deck` | Τα φύλλα που έχουν μείνει στην τράπουλα | JSON Array |
| `last_change` | Τελευταία αλλαγή/ενέργεια (timestamp) | timestamp |